# ТЗ: RPG «Клятва и Слава»
**Жанр:** ролевая игра (RPG)  
**Сеттинг:** позднее средневековье (реалистичное низкое фэнтези, без магии)  
**Фишка:** продвинутая система репутации (глобальная, фракционная, локальная и персональная), где каждое действие игрока формирует отношение мира.  
**Автор:** Екатерина  
**Версия:** 1.0  
**Платформа:** ПК (Windows)  
**Рекомендованный движок:** Unity 2022 LTS

---

## Оглавление
1. Цели и границы проекта  
2. Термины и допущения  
3. Целевая аудитория и платформы  
4. Игровая петля  
5. Игровые системы (кратко)  
6. Система репутации  
7. Мировое устройство и контент  
8. Примеры квестов и сценариев  
9. Интерфейс и UX  
10. Техническая архитектура  
11. Баланс и влияние репутации  
12. Сохранения и защита от эксплойтов  
13. Тест-кейсы и критерии приёмки  
14. План работ и роли  
15. Риски и пути снижения  
17. Приложения (таблицы, матрицы)

---

## 1. Цели и границы проекта
Цель — разработать сюжетную RPG на 8–12 часов, где решения игрока и его поведение напрямую влияют на реакцию мира через систему репутации.  
Проект сосредоточен на реалистичных последствиях: если герой крадёт, его узнают; если помогает — о нём говорят.

**Не входят в MVP:**
- мультиплеер;
- магические способности;
- полностью открытый мир без загрузок.

---

## 2. Термины и допущения
- **Репутация** — показатель отношения мира к игроку, измеряется в диапазоне от вражды до восхищения.  
- **Фракция** — организация или группа (Корона, Церковь, Гильдия, Разбойники).  
- **Локальная репутация** — мнение жителей отдельного города или региона.  
- **Персональная репутация** — отношение конкретных NPC к игроку.  
- **Свидетель** — персонаж, видящий действие игрока. Без свидетелей событие остаётся тайной.  
- **Слухи** — информация, которая распространяется среди NPC по мере общения между ними.

---

## 3. Целевая аудитория и платформы
Игра рассчитана на поклонников реалистичных RPG вроде *Kingdom Come: Deliverance* и *Mount & Blade*.  
Целевая аудитория — игроки 14–30 лет, интересующиеся историческими и моральными сюжетами.  
Основная платформа — ПК с управлением мышь + клавиатура.

---

## 4. Игровая петля
**Микроуровень:** исследование, бой, кражи, разговоры, торговля.  
**Средний уровень:** выполнение квестов, рост навыков, получение экипировки.  
**Макроуровень:** влияние на фракции, репутация в регионах, финальные сюжетные решения.  

Игрок проходит путь от наёмника до влиятельной фигуры, чьи решения меняют баланс власти в мире.

---

## 5. Игровые системы
- **Характеристика персонажа:** сила, ловкость, рассудок, харизма.  
- **Навыки:** бой, луки, скрытность, торговля, ремесло, риторика и т.д.  
- **Боевая система:** реалистичные сражения на ближней и средней дистанции.  
- **Экономика:** торговля, ценообразование, влияние репутации на стоимость товаров.  
- **Закон и правосудие:** если игрок нарушает порядок, его могут арестовать или оштрафовать.

---

## 6. Система репутации

### 6.1. Уровни и типы
Репутация делится на четыре уровня:
- **Глобальная** — общий статус героя в мире (легендарный, неизвестный, преступник).  
- **Фракционная** — отношение каждой организации к игроку.  
- **Локальная** — отношение жителей конкретных поселений.  
- **Персональная** — отношение отдельных важных NPC.

### 6.2. Основные принципы
1. Репутация меняется только тогда, когда об этом знают другие персонажи — свидетели или слухи.  
2. Закон и репутация — разные механики: можно искупить вину по закону, но не вернуть доверие людей сразу.  
3. Повторяющиеся действия со временем приносят меньше пользы — игрок не может бесконечно «фармить» добро.  
4. Репутация может снижаться или восстанавливаться со временем, если о действиях забывают.

---

## 7. Мировое устройство и контент

### 7.1. Карта
Королевство **Альбрек** делится на три области:
1. **Эдгем** — столица, дворец, порт, рынок.  
2. **Глендэйл** — торговый город, центр гильдий.  
3. **Бримвуд** — лесная зона с лагерями разбойников и рудниками.

### 7.2. Фракции
| Фракция | Ценности | Союзники | Враги |
|----------|-----------|-----------|--------|
| Корона | порядок, закон | Церковь | Разбойники |
| Гильдия | торговля, стабильность | Корона | Разбойники |
| Церковь | вера, мораль | Корона | Разбойники |
| Разбойники | свобода, анархия | — | Корона, Гильдия |
| Жители | безопасность | Гильдия | Разбойники |

### 7.3. NPC
Типы:
- **Обычные жители** — нейтральные, реагируют на репутацию.  
- **Стража** — следит за порядком, реагирует на преступления.  
- **Лидеры фракций** — дают квесты, влияют на политические линии.  
- **Бандиты** — могут быть врагами или союзниками.

---

## 8. Примеры квестов

### «Мост через Бримвуд»
Игрок решает помочь в починке моста. Если он завершает работу честно — получает уважение жителей. Если саботирует — улучшает отношения с разбойниками, но теряет доверие горожан.

### «Чужие кошельки»
Кража у ростовщика: успех без свидетелей остаётся тайной, провал вызывает розыск и падение репутации.

### «Серые монахи»
Игрок помогает Церкви, ловит вора, повышает уважение духовенства.

### «Верность короне»
Можно предать разбойников, служа Короне, или наоборот. Оба выбора ведут к последствиям.

### «Финал»
Игрок может привести к власти Корону, Гильдию или Разбойников — в зависимости от своей репутации и союзов.

---

## 9. Интерфейс и UX
- **Экран репутации** показывает все четыре шкалы и последние изменения.  
- **Цветовые индикаторы:** зелёный — уважение, серый — нейтралитет, красный — враждебность.  
- **Диалоги:** некоторые реплики доступны только при достаточном уровне репутации.  
- **Уведомления:** краткие всплывающие сообщения после событий («+10 репутации в Эдгеме»).

---

## 10. Техническая архитектура

### 10.1. Основные системы
- **ReputationSystem** — управление всеми изменениями репутации.  
- **WitnessSystem** — определяет, кто видел действия игрока.  
- **RumorSystem** — распространяет слухи о поступках.  
- **LawSystem** — обрабатывает штрафы, аресты, розыск.  
- **EconomySystem** — регулирует цены в зависимости от статуса игрока.  
- **QuestSystem** — активирует или блокирует квесты в зависимости от репутации.

---

## 11. Баланс и влияние репутации (описательно)
Репутация напрямую влияет на мир игры:
- **Цены:** добропорядочные игроки получают скидки у торговцев, а преступники — завышенные цены.  
- **Охрана:** персонажи с плохой репутацией подвергаются частым досмотрам, а при крайнем уровне вражды — аресту.  
- **Квесты:** определённые миссии доступны только при положительном или отрицательном уровне репутации.  
- **Общение:** NPC могут отказываться говорить, помогать или торговать в зависимости от отношения.  
- **Реакция фракций:** помощь одной стороне автоматически ухудшает отношения с её противниками.  
- **Глобальный эффект:** при достижении высокого уважения герой может изменить политический баланс в королевстве.

---

## 12. Сохранения и защита от эксплойтов
- Игра автоматически сохраняет прогресс при входе и выходе из города.  
- Повторяющиеся действия постепенно дают меньше репутации, чтобы избежать фарма.  
- Репутацию нельзя искусственно поднять взятками или манипуляциями — нужно заслужить уважение делами.

---

## 13. Тест-кейсы и критерии приёмки
- Кража без свидетелей не влияет на репутацию.  
- Открытая кража вызывает розыск и падение статуса в регионе.  
- Помощь фракции повышает её отношение, но ухудшает репутацию у врагов.  
- При достижении «враждебного» уровня охрана нападает без предупреждения.  
- При долгом спокойствии отношение жителей постепенно возвращается к нейтральному.

---

## 14. План работ и роли
| Неделя | Цель | Ответственные |
|--------|------|----------------|
| 1 | Создание базового прототипа мира и персонажей | Дизайнер, Программист |
| 2 | Внедрение системы репутации и UI | Программист, UX-дизайнер |
| 3 | Добавление свидетелей и законов | Программист, AI |
| 4 | Реализация слухов и влияния фракций | Программист |
| 5 | Настройка экономики и торговли | Программист, Балансер |
| 6 | Создание сюжетных квестов | Нарративный дизайнер |
| 7 | Тестирование и оптимизация | Вся команда |
| 8 | Итоговая сборка и демонстрация MVP | QA, Программист |

---

## 15. Риски и пути снижения
- **Сложность искусственного интеллекта свидетелей** — начать с простого радиуса видимости.  
- **Баланс между фракциями** — тестировать вручную и на основе обратной связи.  
- **Пересечение механик закона и репутации** — отделить юридические последствия от моральных.

---

## 17. Приложения

### 17.2. Таблица базовых действий
| Действие | Последствие | Влияние |
|-----------|--------------|----------|
| Пожертвование церкви | Уважение Церкви и жителей | + |
| Нападение на горожанина | Потеря уважения, розыск | − |
| Помощь Гильдии | Благодарность торговцев | + |
| Сотрудничество с разбойниками | Вражда с Короной и Гильдией | − |
| Защита деревни | Рост локальной репутации | + |

### 17.3. Реакция стражи
| Уровень репутации | Реакция охраны |
|--------------------|----------------|
| Герой | Приветствие и уважение |
| Уважаемый | Быстрый пропуск |
| Нейтральный | Проверка документов |
| Подозрительный | Частые досмотры |
| Враг | Мгновенный арест |
